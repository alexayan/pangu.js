/*!
 * pangu.js
 * --------
 * @version: 3.3.0
 * @homepage: https://github.com/vinta/pangu.js
 * @license: MIT
 * @author: Vinta Chen <vinta.chen@gmail.com> (https://github.com/vinta)
 */
!function(u,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("pangu",[],e):"object"==typeof exports?exports.pangu=e():u.pangu=e()}(this,function(){return function(u){function e(a){if(f[a])return f[a].exports;var t=f[a]={exports:{},id:a,loaded:!1};return u[a].call(t.exports,t,t.exports,e),t.loaded=!0,t.exports}var f={};return e.m=u,e.c=f,e.p="",e(0)}([function(u,e,f){"use strict";function a(u,e){if(!(u instanceof e))throw new TypeError("Cannot call a class as a function")}function t(u,e){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?u:e}function n(u,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);u.prototype=Object.create(e&&e.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(u,e):u.__proto__=e)}var i=function(){function u(u,e){for(var f=0;f<e.length;f++){var a=e[f];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(u,a.key,a)}}return function(e,f,a){return f&&u(e.prototype,f),a&&u(e,a),e}}(),r=f(1).Pangu,o=8,s=function(u){function e(){a(this,e);var u=t(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return u.topTags=/^(html|head|body|#document)$/i,u.ignoreTags=/^(script|code|pre|textarea)$/i,u.spaceSensitiveTags=/^(a|del|pre|s|strike|u)$/i,u.spaceLikeTags=/^(br|hr|i|img|pangu)$/i,u.blockTags=/^(div|h1|h2|h3|h4|h5|h6|p)$/i,u}return n(e,u),i(e,[{key:"canIgnoreNode",value:function(u){for(var e=u.parentNode;e&&e.nodeName&&e.nodeName.search(this.topTags)===-1;){if(e.nodeName.search(this.ignoreTags)>=0||e.isContentEditable||"true"===e.getAttribute("g_editable"))return!0;e=e.parentNode}return!1}},{key:"isFirstTextChild",value:function(u,e){for(var f=u.childNodes,a=0;a<f.length;a++){var t=f[a];if(t.nodeType!==o&&t.textContent)return t===e}return!1}},{key:"isLastTextChild",value:function(u,e){for(var f=u.childNodes,a=f.length-1;a>-1;a--){var t=f[a];if(t.nodeType!==o&&t.textContent)return t===e}return!1}},{key:"spacingNodeByXPath",value:function(u,e){for(var f=document.evaluate(u,e,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),a=void 0,t=void 0,n=f.snapshotLength-1;n>-1;--n)if(a=f.snapshotItem(n),this.canIgnoreNode(a))t=a;else{var i=this.spacing(a.data);if(a.data!==i&&(a.data=i),t){if(a.nextSibling&&a.nextSibling.nodeName.search(this.spaceLikeTags)>=0){t=a;continue}var r=a.data.toString().substr(-1)+t.data.toString().substr(0,1),o=this.spacing(r);if(o!==r){for(var s=t;s.parentNode&&s.nodeName.search(this.spaceSensitiveTags)===-1&&this.isFirstTextChild(s.parentNode,s);)s=s.parentNode;for(var c=a;c.parentNode&&c.nodeName.search(this.spaceSensitiveTags)===-1&&this.isLastTextChild(c.parentNode,c);)c=c.parentNode;if(c.nextSibling&&c.nextSibling.nodeName.search(this.spaceLikeTags)>=0){t=a;continue}if(c.nodeName.search(this.blockTags)===-1)if(s.nodeName.search(this.spaceSensitiveTags)===-1)s.nodeName.search(this.ignoreTags)===-1&&s.nodeName.search(this.blockTags)===-1&&(t.previousSibling?t.previousSibling.nodeName.search(this.spaceLikeTags)===-1&&(t.data=" "+t.data):this.canIgnoreNode(t)||(t.data=" "+t.data));else if(c.nodeName.search(this.spaceSensitiveTags)===-1)a.data=a.data+" ";else{var d=document.createElement("pangu");d.innerHTML=" ",s.previousSibling?s.previousSibling.nodeName.search(this.spaceLikeTags)===-1&&s.parentNode.insertBefore(d,s):s.parentNode.insertBefore(d,s),d.previousElementSibling||d.parentNode&&d.parentNode.removeChild(d)}}}t=a}}},{key:"spacingNode",value:function(u){var e=".//*/text()[normalize-space(.)]";this.spacingNodeByXPath(e,u)}},{key:"spacingElementById",value:function(u){var e='id("'+u+'")//text()';this.spacingNodeByXPath(e,document)}},{key:"spacingElementByClassName",value:function(u){var e='//*[contains(concat(" ", normalize-space(@class), " "), "'+u+'")]//text()';this.spacingNodeByXPath(e,document)}},{key:"spacingElementByTagName",value:function(u){var e="//"+u+"//text()";this.spacingNodeByXPath(e,document)}},{key:"spacingPageTitle",value:function(){var u="/html/head/title/text()";this.spacingNodeByXPath(u,document)}},{key:"spacingPageBody",value:function(){for(var u="/html/body//*/text()[normalize-space(.)]",e=["script","style","textarea"],f=0;f<e.length;f++){var a=e[f];u+='[translate(name(..),"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")!="'+a+'"]'}this.spacingNodeByXPath(u,document)}},{key:"spacingPage",value:function(){this.spacingPageTitle(),this.spacingPageBody()}}]),e}(r),c=new s;e=u.exports=c,e.Pangu=s},function(u,e){"use strict";function f(u,e){if(!(u instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function u(u,e){for(var f=0;f<e.length;f++){var a=e[f];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(u,a.key,a)}}return function(e,f,a){return f&&u(e.prototype,f),a&&u(e,a),e}}(),t=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])(["])/g,n=/(["])([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/g,i=/(["']+)(\s*)(.+?)(\s*)(["']+)/g,r=/(["]+)(\s*)(.+?)(\s*)(["]+)/g,o=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])( )(')([A-Za-z])/g,s=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])(#)([A-Za-z0-9\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff]+)(#)([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/g,c=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])(#([^ ]))/g,d=/(([^ ])#)([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/g,p=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([\+\-\*\/=\\|<>])([A-Za-z0-9])/g,l=/([A-Za-z0-9])([\+\-\*\/=&\\|<>])([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/g,g=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([\(\[\{<\u201c]+(.*?)[\)\]\}>\u201d]+)([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/g,h=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([\(\[\{<\u201c>])/g,v=/([\)\]\}>\u201d<])([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/g,b=/([\(\[\{<\u201c]+)(\s*)(.+?)(\s*)([\)\]\}>\u201d]+)/,y=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([~!;:,\.\?\u2026])([A-Za-z0-9])/g,$=/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([A-Za-z0-9`\$%\^&\*\-=\+\\\|\/@\u00a1-\u00ff\u2022\u2027\u2150-\u218f])/g,m=/([A-Za-z0-9`~\$%\^&\*\-=\+\\\|\/!;:,\.\?\u00a1-\u00ff\u2022\u2026\u2027\u2150-\u218f])([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/g,N=function(){function u(){f(this,u)}return a(u,[{key:"spacing",value:function(u){var e=u;e=e.replace(t,"$1 $2"),e=e.replace(n,"$1 $2"),e=/^[^\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff]+$/.test(e)?e.replace(r,"$1$3$5"):e.replace(i,"$1$3$5"),e=e.replace(o,"$1$3$4"),e=e.replace(s,"$1 $2$3$4 $5"),e=e.replace(c,"$1 $2"),e=e.replace(d,"$1 $3"),e=e.replace(p,"$1 $2 $3"),e=e.replace(l,"$1 $2 $3");var f=e,a=e.replace(g,"$1 $2 $4");return e=a,f===a&&(e=e.replace(h,"$1 $2"),e=e.replace(v,"$1 $2")),e=e.replace(b,"$1$3$5"),e=e.replace(y,"$1$2 $3"),e=e.replace($,"$1 $2"),e=e.replace(m,"$1 $2")}},{key:"spacingText",value:function(u){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};try{var f=this.spacing(u);e(null,f)}catch(a){e(a)}}}]),u}(),T=new N;e=u.exports=T,e.Pangu=N}])});
//# sourceMappingURL=pangu.min.js.map